<?php//评论列表function wpmee_comment($comment, $args, $depth) {    $commentcountText='';    $GLOBALS['comment'] = $comment;     //主评论计数器 by zwwooooo    global $commentcount, $page, $wpdb;    if ( (int) get_option('page_comments') === 1 && (int) get_option('thread_comments') === 1 ) { //开启嵌套评论和分页才启用        if(!$commentcount) { //初始化楼层计数器            $page = ( !empty($in_comment_loop) ) ? get_query_var('cpage') : get_page_of_comment( $comment->comment_ID, $args ); //获取当前评论列表页码            $cpp = get_option('comments_per_page'); //获取每页评论显示数量            if ( get_option('comment_order') === 'desc' ) { //倒序                $cnt = get_comments('post_id='.$post->ID.'&status=approve&count=true'); //获取主评论总数量                if (ceil($cnt / $cpp) == 1 || ($page > 1 && $page  == ceil($cnt / $cpp))) { //如果评论只有1页或者是最后一页，初始值为主评论总数                    $commentcount = $cnt + 1;                } else {                    $commentcount = $cpp * $page + 1;                }            } else {                $commentcount = $cpp * ($page - 1);            }        }        if ( !$parent_id = $comment->comment_parent ) {            if ( get_option('comment_order') === 'desc' ) { //倒序                $commentcountText .= --$commentcount . '樓';            } else {                switch ($commentcount) {                    case 0:                        $commentcountText .= '<span class="floor_first">沙发</span>'; ++$commentcount;                        break;                    case 1:                        $commentcountText .= '<span class="floor_first floor_second">板凳</span>'; ++$commentcount;                        break;                    case 2:                        $commentcountText .= '<span class="floor_first floor_third">地板</span>'; ++$commentcount;                        break;                    default:                        $commentcountText .= ++$commentcount . '樓';                        break;                }            }                    }    }    extract($args, EXTR_SKIP);?><li <?php comment_class(); ?>  id="li-comment-<?php comment_ID() ?>">    <div id="comment-<?php comment_ID() ?>">        <div class="comment-avatar"><?php echo get_avatar($comment,50); ?></div>        <div class="comment-body">            <div class="comment_author">                <span class="name"><?php comment_author_link() ?></span>                <?php if($comment->user_id == 1) echo "<span class='comment_admin'>站长</span>"; ?>                <em><?php echo get_comment_time('Y-m-d H:i') ?></em>                <div class="comment_floor"><?php echo $commentcountText;?></div>            </div>            <div class="comment-text">            <?php comment_text() ?>            <?php if ( $comment->comment_approved == '0' ) : ?>            <font style="color:#C00; font-style:inherit">您的評論正在等待審核中...</font>            <?php endif; ?>            </div>            <div class="comment_reply">                         <span>                    <?php comment_reply_link(array_merge( $args, array('depth' => $depth, 'max_depth' => $args['max_depth'], 'reply_text' => "回复"))) ?>                </span>            </div>        </div>    </div><?php }function wpmee_end_comment() {    echo '</li>';}